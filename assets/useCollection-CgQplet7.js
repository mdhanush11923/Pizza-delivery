import{at as ae,r as p,aq as ue,bV as fe,bW as de,$ as ne,c as X,bX as he,am as ye,ap as pe,I as re,f as Y,bY as J,b2 as be,bZ as Q,b_ as ve,b$ as ge,R as z}from"./index-CfFJ_CLj.js";function $e(i,e){const t=[];for(;i&&i!==document.documentElement;)ae(i,e)&&t.push(i),i=i.parentElement;return t}let Ke=0;const G=new Map;function Se(i){let[e,t]=p.useState();return ue(()=>{if(!i)return;let l=G.get(i);if(l)t(l.element.id);else{let s=`react-aria-description-${Ke++}`;t(s);let n=document.createElement("div");n.id=s,n.style.display="none",n.textContent=i,document.body.appendChild(n),l={refCount:0,element:n},G.set(i,l)}return l.refCount++,()=>{l&&--l.refCount===0&&(l.element.remove(),G.delete(i))}},[i]),{"aria-describedby":i?e:void 0}}function me(i,e,t,l){let s=fe(t),n=t==null;p.useEffect(()=>{if(n||!i.current)return;let r=i.current;return r.addEventListener(e,s,l),()=>{r.removeEventListener(e,s,l)}},[i,e,l,n,s])}function oe(i,e){let t=N(i,e,"left"),l=N(i,e,"top"),s=e.offsetWidth,n=e.offsetHeight,r=i.scrollLeft,u=i.scrollTop,{borderTopWidth:a,borderLeftWidth:y}=getComputedStyle(i),b=i.scrollLeft+parseInt(y,10),v=i.scrollTop+parseInt(a,10),f=b+i.clientWidth,d=v+i.clientHeight;t<=r?r=t-parseInt(y,10):t+s>f&&(r+=t+s-f),l<=v?u=l-parseInt(a,10):l+n>d&&(u+=l+n-d),i.scrollLeft=r,i.scrollTop=u}function N(i,e,t){const l=t==="left"?"offsetLeft":"offsetTop";let s=0;for(;e.offsetParent&&(s+=e[l],e.offsetParent!==i);){if(e.offsetParent.contains(i)){s-=i[l];break}e=e.offsetParent}return s}function _(i,e){if(document.contains(i)){let r=document.scrollingElement||document.documentElement;if(window.getComputedStyle(r).overflow==="hidden"){let a=$e(i);for(let y of a)oe(y,i)}else{var t;let{left:a,top:y}=i.getBoundingClientRect();i==null||(t=i.scrollIntoView)===null||t===void 0||t.call(i,{block:"nearest"});let{left:b,top:v}=i.getBoundingClientRect();if(Math.abs(a-b)>1||Math.abs(y-v)>1){var l,s,n;e==null||(s=e.containingElement)===null||s===void 0||(l=s.scrollIntoView)===null||l===void 0||l.call(s,{block:"center",inline:"center"}),(n=i.scrollIntoView)===null||n===void 0||n.call(i,{block:"nearest"})}}}}const xe=500;function we(i){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:l,onLongPress:s,threshold:n=xe,accessibilityDescription:r}=i;const u=p.useRef();let{addGlobalListener:a,removeGlobalListener:y}=de(),{pressProps:b}=ne({isDisabled:e,onPressStart(f){if(f.continuePropagation(),(f.pointerType==="mouse"||f.pointerType==="touch")&&(t&&t({...f,type:"longpressstart"}),u.current=setTimeout(()=>{f.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),s&&s({...f,type:"longpress"}),u.current=void 0},n),f.pointerType==="touch")){let d=P=>{P.preventDefault()};a(f.target,"contextmenu",d,{once:!0}),a(window,"pointerup",()=>{setTimeout(()=>{y(f.target,"contextmenu",d)},30)},{once:!0})}},onPressEnd(f){u.current&&clearTimeout(u.current),l&&(f.pointerType==="mouse"||f.pointerType==="touch")&&l({...f,type:"longpressend"})}}),v=Se(s&&!e?r:void 0);return{longPressProps:X(b,v)}}function j(i){return he()?i.altKey:i.ctrlKey}function O(i){return ye()?i.metaKey:i.ctrlKey}const Pe=1e3;function Fe(i){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=i,s=p.useRef({search:"",timeout:null}).current,n=r=>{let u=Te(r.key);if(!u||r.ctrlKey||r.metaKey||!r.currentTarget.contains(r.target))return;u===" "&&s.search.trim().length>0&&(r.preventDefault(),"continuePropagation"in r||r.stopPropagation()),s.search+=u;let a=e.getKeyForSearch(s.search,t.focusedKey);a==null&&(a=e.getKeyForSearch(s.search)),a!=null&&(t.setFocusedKey(a),l&&l(a)),clearTimeout(s.timeout),s.timeout=setTimeout(()=>{s.search=""},Pe)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?n:null}}}function Te(i){return i.length===1||!/^[A-Z]/i.test(i)?i:""}function Be(i){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:s=!1,shouldFocusWrap:n=!1,disallowEmptySelection:r=!1,disallowSelectAll:u=!1,selectOnFocus:a=e.selectionBehavior==="replace",disallowTypeAhead:y=!1,shouldUseVirtualFocus:b,allowsTabNavigation:v=!1,isVirtualized:f,scrollRef:d=l,linkBehavior:P="action"}=i,{direction:K}=pe(),g=re(),T=o=>{if(o.altKey&&o.key==="Tab"&&o.preventDefault(),!l.current.contains(o.target))return;const $=(h,R)=>{if(h!=null){if(e.isLink(h)&&P==="selection"&&a&&!j(o)){ve.flushSync(()=>{e.setFocusedKey(h,R)});let B=d.current.querySelector(`[data-key="${CSS.escape(h.toString())}"]`),Z=e.getItemProps(h);g.open(B,o,Z.href,Z.routerOptions);return}if(e.setFocusedKey(h,R),e.isLink(h)&&P==="override")return;o.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):a&&!j(o)&&e.replaceSelection(h)}};switch(o.key){case"ArrowDown":if(t.getKeyBelow){var w,x;o.preventDefault();let h=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(w=t.getFirstKey)===null||w===void 0?void 0:w.call(t);h==null&&n&&(h=(x=t.getFirstKey)===null||x===void 0?void 0:x.call(t,e.focusedKey)),$(h)}break;case"ArrowUp":if(t.getKeyAbove){var I,C;o.preventDefault();let h=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(I=t.getLastKey)===null||I===void 0?void 0:I.call(t);h==null&&n&&(h=(C=t.getLastKey)===null||C===void 0?void 0:C.call(t,e.focusedKey)),$(h)}break;case"ArrowLeft":if(t.getKeyLeftOf){var U,c;o.preventDefault();let h=t.getKeyLeftOf(e.focusedKey);h==null&&n&&(h=K==="rtl"?(U=t.getFirstKey)===null||U===void 0?void 0:U.call(t,e.focusedKey):(c=t.getLastKey)===null||c===void 0?void 0:c.call(t,e.focusedKey)),$(h,K==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){var A,q;o.preventDefault();let h=t.getKeyRightOf(e.focusedKey);h==null&&n&&(h=K==="rtl"?(A=t.getLastKey)===null||A===void 0?void 0:A.call(t,e.focusedKey):(q=t.getFirstKey)===null||q===void 0?void 0:q.call(t,e.focusedKey)),$(h,K==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){o.preventDefault();let h=t.getFirstKey(e.focusedKey,O(o));e.setFocusedKey(h),O(o)&&o.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):a&&e.replaceSelection(h)}break;case"End":if(t.getLastKey){o.preventDefault();let h=t.getLastKey(e.focusedKey,O(o));e.setFocusedKey(h),O(o)&&o.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):a&&e.replaceSelection(h)}break;case"PageDown":if(t.getKeyPageBelow){o.preventDefault();let h=t.getKeyPageBelow(e.focusedKey);$(h)}break;case"PageUp":if(t.getKeyPageAbove){o.preventDefault();let h=t.getKeyPageAbove(e.focusedKey);$(h)}break;case"a":O(o)&&e.selectionMode==="multiple"&&u!==!0&&(o.preventDefault(),e.selectAll());break;case"Escape":!r&&e.selectedKeys.size!==0&&(o.stopPropagation(),o.preventDefault(),e.clearSelection());break;case"Tab":if(!v){if(o.shiftKey)l.current.focus();else{let h=be(l.current,{tabbable:!0}),R,B;do B=h.lastChild(),B&&(R=B);while(B);R&&!R.contains(document.activeElement)&&Q(R)}break}}},S=p.useRef({top:0,left:0});me(d,"scroll",f?null:()=>{S.current={top:d.current.scrollTop,left:d.current.scrollLeft}});let m=o=>{if(e.isFocused){o.currentTarget.contains(o.target)||e.setFocused(!1);return}if(o.currentTarget.contains(o.target)){if(e.setFocused(!0),e.focusedKey==null){let x=C=>{C!=null&&(e.setFocusedKey(C),a&&e.replaceSelection(C))},I=o.relatedTarget;var $,w;I&&o.currentTarget.compareDocumentPosition(I)&Node.DOCUMENT_POSITION_FOLLOWING?x(($=e.lastSelectedKey)!==null&&$!==void 0?$:t.getLastKey()):x((w=e.firstSelectedKey)!==null&&w!==void 0?w:t.getFirstKey())}else f||(d.current.scrollTop=S.current.top,d.current.scrollLeft=S.current.left);if(!f&&e.focusedKey!=null){let x=d.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);x&&(x.contains(document.activeElement)||Q(x),J()==="keyboard"&&_(x,{containingElement:l.current}))}}},D=o=>{o.currentTarget.contains(o.relatedTarget)||e.setFocused(!1)};const k=p.useRef(s);p.useEffect(()=>{if(k.current){let o=null;s==="first"&&(o=t.getFirstKey()),s==="last"&&(o=t.getLastKey());let $=e.selectedKeys;if($.size){for(let w of $)if(e.canSelectItem(w)){o=w;break}}e.setFocused(!0),e.setFocusedKey(o),o==null&&!b&&Y(l.current)}},[]);let E=p.useRef(e.focusedKey);p.useEffect(()=>{let o=J();if(e.isFocused&&e.focusedKey!=null&&(d!=null&&d.current)){let $=d.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);$&&(o==="keyboard"||k.current)&&(f||oe(d.current,$),o!=="virtual"&&_($,{containingElement:l.current}))}e.isFocused&&e.focusedKey==null&&E.current!=null&&Y(l.current),E.current=e.focusedKey,k.current=!1},[f,d,e.focusedKey,e.isFocused,l]);let M={onKeyDown:T,onFocus:m,onBlur:D,onMouseDown(o){d.current===o.target&&o.preventDefault()}},{typeSelectProps:W}=Fe({keyboardDelegate:t,selectionManager:e});y||(M=X(W,M));let L;return b||(L=e.focusedKey==null?0:-1),{collectionProps:{...M,tabIndex:L}}}function Oe(i){let{selectionManager:e,key:t,ref:l,shouldSelectOnPressUp:s,shouldUseVirtualFocus:n,focus:r,isDisabled:u,onAction:a,allowsDifferentPressOrigin:y,linkBehavior:b="action"}=i,v=re(),f=c=>{if(c.pointerType==="keyboard"&&j(c))e.toggleSelection(t);else{if(e.selectionMode==="none")return;if(e.isLink(t)){if(b==="selection"){let A=e.getItemProps(t);v.open(l.current,c,A.href,A.routerOptions),e.setSelectedKeys(e.selectedKeys);return}else if(b==="override"||b==="none")return}e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):c&&c.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||c&&(O(c)||c.pointerType==="touch"||c.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};p.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!n&&(r?r():document.activeElement!==l.current&&Y(l.current))},[l,t,e.focusedKey,e.childFocusStrategy,e.isFocused,n]),u=u||e.isDisabled(t);let d={};!n&&!u?d={tabIndex:t===e.focusedKey?0:-1,onFocus(c){c.target===l.current&&e.setFocusedKey(t)}}:u&&(d.onMouseDown=c=>{c.preventDefault()});let P=e.isLink(t)&&b==="override",K=e.isLink(t)&&b!=="selection"&&b!=="none",g=!u&&e.canSelectItem(t)&&!P,T=(a||K)&&!u,S=T&&(e.selectionBehavior==="replace"?!g:!g||e.isEmpty),m=T&&g&&e.selectionBehavior==="replace",D=S||m,k=p.useRef(null),E=D&&g,M=p.useRef(!1),W=p.useRef(!1),L=c=>{if(a&&a(),K){let A=e.getItemProps(t);v.open(l.current,c,A.href,A.routerOptions)}},o={};s?(o.onPressStart=c=>{k.current=c.pointerType,M.current=E,c.pointerType==="keyboard"&&(!D||te())&&f(c)},y?(o.onPressUp=S?null:c=>{c.pointerType!=="keyboard"&&g&&f(c)},o.onPress=S?L:null):o.onPress=c=>{if(S||m&&c.pointerType!=="mouse"){if(c.pointerType==="keyboard"&&!ee())return;L(c)}else c.pointerType!=="keyboard"&&g&&f(c)}):(o.onPressStart=c=>{k.current=c.pointerType,M.current=E,W.current=S,g&&(c.pointerType==="mouse"&&!S||c.pointerType==="keyboard"&&(!T||te()))&&f(c)},o.onPress=c=>{(c.pointerType==="touch"||c.pointerType==="pen"||c.pointerType==="virtual"||c.pointerType==="keyboard"&&D&&ee()||c.pointerType==="mouse"&&W.current)&&(D?L(c):g&&f(c))}),d["data-key"]=t,o.preventFocusOnPress=n;let{pressProps:$,isPressed:w}=ne(o),x=m?c=>{k.current==="mouse"&&(c.stopPropagation(),c.preventDefault(),L(c))}:void 0,{longPressProps:I}=we({isDisabled:!E,onLongPress(c){c.pointerType==="touch"&&(f(c),e.setSelectionBehavior("toggle"))}}),C=c=>{k.current==="touch"&&M.current&&c.preventDefault()},U=e.isLink(t)?c=>{ge.isOpening||c.preventDefault()}:void 0;return{itemProps:X(d,g||S?$:{},E?I:{},{onDoubleClick:x,onDragStartCapture:C,onClick:U}),isPressed:w,isSelected:e.isSelected(t),isFocused:e.isFocused&&e.focusedKey===t,isDisabled:u,allowsSelection:g,hasAction:D}}function ee(){let i=window.event;return(i==null?void 0:i.key)==="Enter"}function te(){let i=window.event;return(i==null?void 0:i.key)===" "||(i==null?void 0:i.code)==="Space"}class F extends Set{constructor(e,t,l){super(e),e instanceof F?(this.anchorKey=t??e.anchorKey,this.currentKey=l??e.currentKey):(this.anchorKey=t,this.currentKey=l)}}function De(i,e,t){let[l,s]=p.useState(i||e),n=p.useRef(i!==void 0),r=i!==void 0;p.useEffect(()=>{let y=n.current;y!==r&&console.warn(`WARN: A component changed from ${y?"controlled":"uncontrolled"} to ${r?"controlled":"uncontrolled"}.`),n.current=r},[r]);let u=r?i:l,a=p.useCallback((y,...b)=>{let v=(f,...d)=>{t&&(Object.is(u,f)||t(f,...d)),r||(u=f)};typeof y=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),s((d,...P)=>{let K=y(r?u:d,...P);return v(K,...b),r?d:K})):(r||s(y),v(y,...b))},[r,u,t]);return[u,a]}function Ie(i,e){if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0}function Ue(i){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:l,selectionBehavior:s="toggle",disabledBehavior:n="all"}=i,r=p.useRef(!1),[,u]=p.useState(!1),a=p.useRef(null),y=p.useRef(null),[,b]=p.useState(null),v=p.useMemo(()=>le(i.selectedKeys),[i.selectedKeys]),f=p.useMemo(()=>le(i.defaultSelectedKeys,new F),[i.defaultSelectedKeys]),[d,P]=De(v,f,i.onSelectionChange),K=p.useMemo(()=>i.disabledKeys?new Set(i.disabledKeys):new Set,[i.disabledKeys]),[g,T]=p.useState(s);s==="replace"&&g==="toggle"&&typeof d=="object"&&d.size===0&&T("replace");let S=p.useRef(s);return p.useEffect(()=>{s!==S.current&&(T(s),S.current=s)},[s]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:g,setSelectionBehavior:T,get isFocused(){return r.current},setFocused(m){r.current=m,u(m)},get focusedKey(){return a.current},get childFocusStrategy(){return y.current},setFocusedKey(m,D="first"){a.current=m,y.current=D,b(m)},selectedKeys:d,setSelectedKeys(m){(l||!Ie(m,d))&&P(m)},disabledKeys:K,disabledBehavior:n}}function le(i,e){return i?i==="all"?"all":new F(i):e}function Ce(i,e){return typeof e.getChildren=="function"?e.getChildren(i.key):i.childNodes}function Ae(i){return ke(i)}function ke(i,e){for(let t of i)return t}function H(i,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let l=[...ie(i,e),e],s=[...ie(i,t),t],n=l.slice(0,s.length).findIndex((r,u)=>r!==s[u]);return n!==-1?(e=l[n],t=s[n],e.index-t.index):l.findIndex(r=>r===t)>=0?1:(s.findIndex(r=>r===e)>=0,-1)}function ie(i,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=i.getItem(e.parentKey),t.unshift(e);return t}class We{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(l=>t.has(l)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&H(this.collection,l,e)<0)&&(e=l)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&H(this.collection,l,e)>0)&&(e=l)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new F([e],e,e);else{let n=this.state.selectedKeys;var l;let r=(l=n.anchorKey)!==null&&l!==void 0?l:e;t=new F(n,r,e);var s;for(let u of this.getKeyRange(r,(s=n.currentKey)!==null&&s!==void 0?s:e))t.delete(u);for(let u of this.getKeyRange(e,r))this.canSelectItem(u)&&t.add(u)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let l=this.collection.getItem(e),s=this.collection.getItem(t);return l&&s?H(this.collection,l,s)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){var l;if(!((l=this.layoutDelegate)===null||l===void 0)&&l.getKeyRange)return this.layoutDelegate.getKeyRange(e,t);let s=[],n=e;for(;n!=null;){let r=this.collection.getItem(n);if((r&&r.type==="item"||r.type==="cell"&&this.allowsCellSelection)&&s.push(n),n===t)return s;n=this.collection.getKeyAfter(n)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new F(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new F([e],e,e):new F;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new F;for(let l of e)if(l=this.getKey(l),l!=null&&(t.add(l),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=l=>{for(;l!=null;){if(this.canSelectItem(l)){let s=this.collection.getItem(l);s.type==="item"&&e.push(l),s.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&t(Ae(Ce(s,this.collection)).key)}l=this.collection.getKeyAfter(l)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new F)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let l of e)if(!t.has(l))return!1;for(let l of t)if(!e.has(l))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let l=this.collection.getItem(e);return!(!l||!(l==null||(t=l.props)===null||t===void 0)&&t.isDisabled||l.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,l;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,l;return!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}constructor(e,t,l){this.collection=e,this.state=t;var s;this.allowsCellSelection=(s=l==null?void 0:l.allowsCellSelection)!==null&&s!==void 0?s:!1,this._isSelectAll=null,this.layoutDelegate=(l==null?void 0:l.layoutDelegate)||null}}function ce(i){return null}ce.getCollectionNode=function*(e,t){let{childItems:l,title:s,children:n}=e,r=e.title||e.children,u=e.textValue||(typeof r=="string"?r:"")||e["aria-label"]||"";!u&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:r,textValue:u,"aria-label":e["aria-label"],hasChildNodes:Ee(e),*childNodes(){if(l)for(let a of l)yield{type:"item",value:a};else if(s){let a=[];z.Children.forEach(n,y=>{a.push({type:"item",element:y})}),yield*a}}}};function Ee(i){return i.hasChildItems!=null?i.hasChildItems:!!(i.childItems||i.title&&z.Children.count(i.children)>0)}let ze=ce;class Me{build(e,t){return this.context=t,se(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:l}=e;if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");for(let s of e.items)yield*this.getFullNode({value:s},{renderer:t})}else{let s=[];z.Children.forEach(t,r=>{s.push(r)});let n=0;for(let r of s){let u=this.getFullNode({element:r,index:n},{});for(let a of u)n++,yield a}}}getKey(e,t,l,s){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${s}${t.key}`;let n=t.value;if(n!=null){var r;let u=(r=n.key)!==null&&r!==void 0?r:n.id;if(u==null)throw new Error("No key found for item");return u}return s?`${s}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,l,s){let n=e.element;if(!n&&e.value&&t&&t.renderer){let a=this.cache.get(e.value);if(a&&(!a.shouldInvalidate||!a.shouldInvalidate(this.context))){a.index=e.index,a.parentKey=s?s.key:null,yield a;return}n=t.renderer(e.value)}if(z.isValidElement(n)){let a=n.type;if(typeof a!="function"&&typeof a.getCollectionNode!="function"){let f=typeof n.type=="function"?n.type.name:n.type;throw new Error(`Unknown element <${f}> in collection.`)}let y=a.getCollectionNode(n.props,this.context),b=e.index,v=y.next();for(;!v.done&&v.value;){let f=v.value;e.index=b;let d=f.key;d||(d=f.element?null:this.getKey(n,e,t,l));let K=[...this.getFullNode({...f,key:d,index:b,wrapper:Le(e.wrapper,f.wrapper)},this.getChildState(t,f),l?`${l}${n.key}`:n.key,s)];for(let g of K){if(g.value=f.value||e.value,g.value&&this.cache.set(g.value,g),e.type&&g.type!==e.type)throw new Error(`Unsupported type <${V(g.type)}> in <${V(s.type)}>. Only <${V(e.type)}> is supported.`);b++,yield g}v=y.next(K)}return}if(e.key==null)return;let r=this,u={type:e.type,props:e.props,key:e.key,parentKey:s?s.key:null,value:e.value,level:s?s.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:se(function*(){if(!e.hasChildNodes)return;let a=0;for(let y of e.childNodes()){y.key!=null&&(y.key=`${u.key}${y.key}`),y.index=a;let b=r.getFullNode(y,r.getChildState(t,y),u.key,u);for(let v of b)a++,yield v}})};yield u}constructor(){this.cache=new WeakMap}}function se(i){let e=[],t=null;return{*[Symbol.iterator](){for(let l of e)yield l;t||(t=i());for(let l of t)e.push(l),yield l}}}function Le(i,e){if(i&&e)return t=>i(e(t));if(i)return i;if(e)return e}function V(i){return i[0].toUpperCase()+i.slice(1)}function qe(i,e,t){let l=p.useMemo(()=>new Me,[]),{children:s,items:n,collection:r}=i;return p.useMemo(()=>{if(r)return r;let a=l.build({children:s,items:n},t);return e(a)},[l,s,n,r,t,e])}export{Ue as $,qe as a,We as b,ze as c,Oe as d,Fe as e,Be as f,we as g};
